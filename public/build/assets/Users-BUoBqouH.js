import{r as U,k as j,c as r,b as p,u as h,h as S,w as v,d as e,l as C,e as g,m as N,p as T,v as A,j as c,t as n,f as i,F as d,g as _,i as x,q as y}from"./app-DujJ4Qrm.js";import{_ as D}from"./AdminLayout-Chd_PJP9.js";const M={class:"py-8"},z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},B={class:"mb-8 flex items-center justify-between"},P={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6"},V={class:"flex-1"},F={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},L={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},O={class:"text-sm text-gray-500"},$={key:0,class:"divide-y divide-gray-200"},q={class:"flex items-center justify-between"},E={class:"flex items-center gap-4 flex-1"},G={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold text-lg"},H={class:"flex-1 min-w-0"},J={class:"flex items-center gap-3 flex-wrap"},Q={class:"text-lg font-semibold text-gray-900"},I={key:0,class:"px-2 py-1 text-xs font-medium bg-indigo-100 text-indigo-700 rounded-full"},K={class:"text-sm text-gray-500 mt-1"},R={key:0,class:"flex flex-wrap gap-2 mt-2"},W={class:"text-right"},X={class:"text-sm text-gray-500"},Y={key:1,class:"px-6 py-12 text-center text-gray-500"},Z={class:"text-sm mt-1"},ee={key:2,class:"px-6 py-4 border-t border-gray-200 flex items-center justify-between"},te={class:"text-sm text-gray-700"},ae={class:"flex gap-2"},se=["disabled"],ne={class:"px-4 py-2 text-sm font-medium text-gray-700"},re=["disabled"],de={__name:"Users",props:{users:Array,pagination:Object,filters:Object,auth:Object},setup(a){const l=U(a.filters?.search||""),w=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A";let m=null;const f=o=>{m&&clearTimeout(m),m=setTimeout(()=>{y.get("/admin/users",{search:o},{preserveState:!0,replace:!0})},500)};j(l,o=>{f(o)});const k=o=>{o.preventDefault(),f.cancel(),y.get("/admin/users",{search:l.value},{preserveState:!0,replace:!0})},b=o=>{y.get("/admin/users",{search:l.value,page:o},{preserveState:!0})};return(o,s)=>(i(),r(d,null,[p(h(S),{title:"Users - Admin"}),p(D,{user:a.auth?.user,title:"Users Management"},{default:v(()=>[e("div",M,[e("div",z,[e("div",B,[s[4]||(s[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Users"),e("p",{class:"mt-2 text-gray-600"},"Manage all platform users")],-1)),p(h(C),{href:"/admin/dashboard",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},{default:v(()=>[...s[3]||(s[3]=[g(" â† Back to Dashboard ",-1)])]),_:1})]),e("div",P,[e("form",{onSubmit:N(k,["prevent"]),class:"flex gap-4"},[e("div",V,[T(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),type:"text",placeholder:"Search users by name or email...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[A,l.value]])]),s[5]||(s[5]=e("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Search ",-1))],32)]),e("div",F,[e("div",L,[s[6]||(s[6]=e("h2",{class:"text-lg font-semibold text-gray-900"}," All Users ",-1)),e("span",O," Showing "+n(a.pagination?.from||0)+" to "+n(a.pagination?.to||0)+" of "+n(a.pagination?.total||0)+" users ",1)]),a.users&&a.users.length>0?(i(),r("div",$,[(i(!0),r(d,null,_(a.users,t=>(i(),r("div",{key:t.id,class:"px-6 py-4 hover:bg-gray-50 transition-colors"},[e("div",q,[e("div",E,[e("div",G,n(t.name?t.name.charAt(0).toUpperCase():"U"),1),e("div",H,[e("div",J,[e("p",Q,n(t.name||"Unknown User"),1),t.is_platform_admin?(i(),r("span",I," Platform Admin ")):c("",!0),t.plan_name||t.plan_display_name?(i(),r("span",{key:1,class:x(["px-2 py-1 text-xs font-medium rounded-full whitespace-nowrap",t.is_trial?"bg-yellow-100 text-yellow-700":t.plan_name&&t.plan_name.toLowerCase()==="pro"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"])},[t.is_trial&&t.trial_days_remaining!==null&&t.trial_days_remaining>0?(i(),r(d,{key:0},[g(" Pro Trial ("+n(t.trial_days_remaining)+" days) ",1)],64)):t.is_trial&&t.trial_days_remaining===0?(i(),r(d,{key:1},[g(" Pro Trial (Expired) ")],64)):(i(),r(d,{key:2},[g(n(t.plan_display_name||(t.plan_name?t.plan_name.charAt(0).toUpperCase()+t.plan_name.slice(1):"Free")),1)],64))],2)):c("",!0)]),e("p",K,n(t.email||"No email"),1),t.organizations&&t.organizations.length>0?(i(),r("div",R,[(i(!0),r(d,null,_(t.organizations,u=>(i(),r("span",{key:u.id,class:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-full"},n(u.name)+" ("+n(u.role)+") ",1))),128))])):c("",!0)])]),e("div",W,[e("p",X," Joined: "+n(w(t.created_at)),1)])])]))),128))])):(i(),r("div",Y,[s[7]||(s[7]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),s[8]||(s[8]=e("p",{class:"text-lg font-medium"},"No users found",-1)),e("p",Z,n(l.value?"Try adjusting your search query":"Users will appear here once they register"),1)])),a.pagination&&a.pagination.last_page>1?(i(),r("div",ee,[e("div",te," Showing "+n(a.pagination.from)+" to "+n(a.pagination.to)+" of "+n(a.pagination.total)+" results ",1),e("div",ae,[e("button",{onClick:s[1]||(s[1]=t=>b(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:x(["px-4 py-2 text-sm font-medium rounded-lg transition-colors",a.pagination.current_page===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"])}," Previous ",10,se),e("span",ne," Page "+n(a.pagination.current_page)+" of "+n(a.pagination.last_page),1),e("button",{onClick:s[2]||(s[2]=t=>b(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:x(["px-4 py-2 text-sm font-medium rounded-lg transition-colors",a.pagination.current_page===a.pagination.last_page?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"])}," Next ",10,re)])])):c("",!0)])])])]),_:1},8,["user"])],64))}};export{de as default};
