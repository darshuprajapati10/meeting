import{s as b,c as n,b as y,u as f,h as p,w,d as t,t as o,j as l,f as i,F as u,g as m,i as v,n as _,q as k}from"./app-DujJ4Qrm.js";import{_ as j}from"./AdminLayout-Chd_PJP9.js";const M={class:"py-8"},z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},C={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},B={class:"flex items-center justify-between"},U={class:"text-3xl font-bold text-gray-900 mt-2"},A={class:"flex items-center justify-between"},O={class:"text-3xl font-bold text-gray-900 mt-2"},N={class:"flex items-center justify-between"},V={class:"text-3xl font-bold text-gray-900 mt-2"},$={class:"flex items-center justify-between"},P={class:"text-3xl font-bold text-gray-900 mt-2"},D={class:"flex items-center justify-between"},H={class:"text-3xl font-bold text-gray-900 mt-2"},S={class:"flex items-center justify-between"},L={class:"text-3xl font-bold text-gray-900 mt-2"},F={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},G={id:"recent-users",class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 scroll-mt-8"},R={class:"flex items-center justify-between mb-4"},T={class:"text-sm text-gray-500"},q={class:"space-y-3 max-h-96 overflow-y-auto pr-2"},E={key:0,class:"text-center py-8 text-gray-500"},I={class:"flex items-center gap-3"},J={class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold"},K={class:"font-medium text-gray-900"},Q={class:"text-sm text-gray-500"},W={class:"flex items-center gap-2"},X={key:0,class:"px-2 py-1 text-xs font-medium bg-indigo-100 text-indigo-700 rounded-full whitespace-nowrap"},Y={class:"text-xs text-gray-400 whitespace-nowrap"},Z={id:"recent-organizations",class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 scroll-mt-8"},tt={class:"flex items-center justify-between mb-4"},et={class:"text-sm text-gray-500"},st={class:"space-y-3 max-h-96 overflow-y-auto pr-2"},ot={key:0,class:"text-center py-8 text-gray-500"},rt={class:"flex items-center gap-3"},nt={class:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold"},it={class:"font-medium text-gray-900"},at={class:"text-xs text-gray-400 whitespace-nowrap"},lt={id:"subscription-plans",class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8 scroll-mt-8"},dt={class:"flex items-center justify-between mb-6"},ct={class:"text-sm text-gray-500"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},mt={class:"flex items-center justify-between mb-4"},xt={class:"text-2xl font-bold text-gray-900"},gt={class:"text-sm text-gray-600 mt-1"},ht={key:0,class:"px-3 py-1 text-xs font-medium bg-purple-100 text-purple-700 rounded-full"},yt={class:"mb-4"},vt={class:"flex items-baseline gap-2"},bt={class:"text-3xl font-bold text-gray-900"},ft={class:"flex items-baseline gap-2 mt-2"},pt={class:"text-xl font-semibold text-gray-700"},wt={class:"flex items-center gap-2 mt-4 mb-4 pb-4 border-b border-gray-200"},_t={class:"text-xs text-gray-500"},kt={class:"mt-4"},jt={class:"flex items-center justify-between mb-3"},Mt={class:"text-xs text-gray-500"},zt={class:"space-y-2 max-h-64 overflow-y-auto pr-2"},Ct={key:0,class:"text-center py-6 text-gray-400"},Bt={class:"flex items-center gap-2 flex-1 min-w-0"},Ut={class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-semibold flex-shrink-0"},At={class:"min-w-0 flex-1"},Ot={class:"font-medium text-gray-900 text-xs truncate"},Nt={class:"text-xs text-gray-500 truncate"},Vt={key:0,class:"text-xs text-gray-400 truncate mt-0.5"},$t={class:"flex items-center gap-2 flex-shrink-0 ml-2"},Pt={key:0,class:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-full whitespace-nowrap"},Dt={key:0,class:"mt-3 pt-3 border-t border-gray-200 text-center"},Ht={class:"text-xs text-gray-500"},St={key:0,class:"text-center py-12 text-gray-500"},Lt={id:"chart-section",class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 scroll-mt-8"},Ft={key:0,class:"space-y-4"},Gt={class:"flex items-end justify-between gap-2 h-64 px-4 pb-8 border-b border-gray-200"},Rt=["title"],Tt={class:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none"},qt={class:"text-xs text-gray-500 mt-3 text-center font-medium truncate w-full"},Et={class:"text-xs font-bold text-gray-900 mt-1"},It={class:"flex justify-between items-center pt-4"},Jt={class:"text-sm text-gray-600"},Kt={class:"text-gray-900"},Qt={class:"text-sm text-gray-600"},Wt={class:"text-gray-900"},Xt={key:1,class:"text-center py-12 text-gray-500"},te={__name:"Dashboard",props:{stats:Object,recentUsers:Array,recentOrganizations:Array,usersByMonth:Array,subscriptionPlans:Array,auth:Object},setup(r){const x=r,g=d=>d?new Date(d).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",h=b(()=>{if(!x.usersByMonth||x.usersByMonth.length===0)return 1;const d=Math.max(...x.usersByMonth.map(e=>e.count||0));return d>0?d:1}),c=d=>{const s={users:"/admin/users",organizations:"/admin/organizations",contacts:"/admin/contacts",meetings:"/admin/meetings",surveys:"/admin/surveys",admins:"/admin/users?filter=admins"}[d];s&&k.visit(s)};return(d,e)=>(i(),n(u,null,[y(f(p),{title:"Admin Dashboard"}),y(j,{user:r.auth?.user},{default:w(()=>[t("div",M,[t("div",z,[e[33]||(e[33]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"Admin Dashboard"),t("p",{class:"mt-2 text-gray-600"},"Platform overview and statistics")],-1)),t("div",C,[t("div",{onClick:e[0]||(e[0]=s=>c("users")),class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md hover:border-blue-300 transition-all cursor-pointer active:scale-95"},[t("div",B,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Users",-1)),t("p",U,o(r.stats?.total_users||0),1)]),e[7]||(e[7]=t("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1))])]),t("div",{onClick:e[1]||(e[1]=s=>c("organizations")),class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md hover:border-purple-300 transition-all cursor-pointer active:scale-95"},[t("div",A,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-600"},"Organizations",-1)),t("p",O,o(r.stats?.total_organizations||0),1)]),e[9]||(e[9]=t("div",{class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))])]),t("div",{onClick:e[2]||(e[2]=s=>c("contacts")),class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md hover:border-green-300 transition-all cursor-pointer active:scale-95"},[t("div",N,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600"},"Contacts",-1)),t("p",V,o(r.stats?.total_contacts||0),1)]),e[11]||(e[11]=t("div",{class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])]),t("div",{onClick:e[3]||(e[3]=s=>c("meetings")),class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md hover:border-orange-300 transition-all cursor-pointer active:scale-95"},[t("div",$,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600"},"Meetings",-1)),t("p",P,o(r.stats?.total_meetings||0),1)]),e[13]||(e[13]=t("div",{class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))])]),t("div",{onClick:e[4]||(e[4]=s=>c("surveys")),class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md hover:border-pink-300 transition-all cursor-pointer active:scale-95"},[t("div",D,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-600"},"Surveys",-1)),t("p",H,o(r.stats?.total_surveys||0),1)]),e[15]||(e[15]=t("div",{class:"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-pink-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1))])]),t("div",{onClick:e[5]||(e[5]=s=>c("admins")),class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md hover:border-indigo-300 transition-all cursor-pointer active:scale-95"},[t("div",S,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-600"},"Platform Admins",-1)),t("p",L,o(r.stats?.platform_admins||0),1)]),e[17]||(e[17]=t("div",{class:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])],-1))])])]),t("div",F,[t("div",G,[t("div",R,[e[18]||(e[18]=t("h2",{class:"text-xl font-semibold text-gray-900"},"Recent Users",-1)),t("span",T,o(r.recentUsers?.length||0)+" shown",1)]),t("div",q,[!r.recentUsers||r.recentUsers.length===0?(i(),n("div",E,[...e[19]||(e[19]=[t("p",null,"No users found",-1)])])):l("",!0),(i(!0),n(u,null,m(r.recentUsers,s=>(i(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[t("div",I,[t("div",J,o(s.name?s.name.charAt(0).toUpperCase():"U"),1),t("div",null,[t("p",K,o(s.name||"Unknown User"),1),t("p",Q,o(s.email||"No email"),1)])]),t("div",W,[s.is_platform_admin?(i(),n("span",X," Admin ")):l("",!0),t("span",Y,o(g(s.created_at)),1)])]))),128))])]),t("div",Z,[t("div",tt,[e[20]||(e[20]=t("h2",{class:"text-xl font-semibold text-gray-900"},"Recent Organizations",-1)),t("span",et,o(r.recentOrganizations?.length||0)+" shown",1)]),t("div",st,[!r.recentOrganizations||r.recentOrganizations.length===0?(i(),n("div",ot,[...e[21]||(e[21]=[t("p",null,"No organizations found",-1)])])):l("",!0),(i(!0),n(u,null,m(r.recentOrganizations,s=>(i(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[t("div",rt,[t("div",nt,o(s.name?s.name.charAt(0).toUpperCase():"O"),1),t("div",null,[t("p",it,o(s.name||"Unnamed Organization"),1),e[22]||(e[22]=t("p",{class:"text-sm text-gray-500"},"Organization",-1))])]),t("span",at,o(g(s.created_at)),1)]))),128))])])]),t("div",lt,[t("div",dt,[e[23]||(e[23]=t("h2",{class:"text-xl font-semibold text-gray-900"},"Subscription Plans",-1)),t("span",ct,o(r.subscriptionPlans?.length||0)+" active plans",1)]),t("div",ut,[(i(!0),n(u,null,m(r.subscriptionPlans,s=>(i(),n("div",{key:s.id,class:v(["border-2 rounded-xl p-6 transition-all hover:shadow-lg",s.name==="pro"?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50":"border-gray-200 bg-white"])},[t("div",mt,[t("div",null,[t("h3",xt,o(s.display_name),1),t("p",gt,o(s.description),1)]),s.name==="pro"?(i(),n("span",ht," Popular ")):l("",!0)]),t("div",yt,[t("div",vt,[t("span",bt,o(s.price_monthly_formatted),1),e[24]||(e[24]=t("span",{class:"text-gray-600"},"/month",-1))]),t("div",ft,[t("span",pt,o(s.price_yearly_formatted),1),e[25]||(e[25]=t("span",{class:"text-gray-500 text-sm"},"/year",-1))])]),t("div",wt,[t("span",{class:v(["px-2 py-1 text-xs font-medium rounded-full",s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},o(s.is_active?"Active":"Inactive"),3),t("span",_t,"Sort Order: "+o(s.sort_order),1)]),t("div",kt,[t("div",jt,[e[26]||(e[26]=t("h4",{class:"text-sm font-semibold text-gray-900"},"Users",-1)),t("span",Mt,o(s.user_count||0)+" users â€¢ "+o(s.organization_count||0)+" organizations",1)]),t("div",zt,[!s.users||s.users.length===0?(i(),n("div",Ct,[...e[27]||(e[27]=[t("svg",{class:"w-8 h-8 mx-auto mb-2 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),t("p",{class:"text-xs"},"No users on this plan",-1)])])):l("",!0),(i(!0),n(u,null,m(s.users,a=>(i(),n("div",{key:a.id,class:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200"},[t("div",Bt,[t("div",Ut,o(a.name?a.name.charAt(0).toUpperCase():"U"),1),t("div",At,[t("p",Ot,o(a.name||"Unknown User"),1),t("p",Nt,o(a.email||"No email"),1),a.organization_name?(i(),n("p",Vt,o(a.organization_name),1)):l("",!0)])]),t("div",$t,[a.role?(i(),n("span",Pt,o(a.role),1)):l("",!0)])]))),128))]),s.user_count>(s.users?.length||0)?(i(),n("div",Dt,[t("p",Ht," Showing "+o(s.users?.length||0)+" of "+o(s.user_count)+" users ",1)])):l("",!0)])],2))),128))]),!r.subscriptionPlans||r.subscriptionPlans.length===0?(i(),n("div",St,[...e[28]||(e[28]=[t("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("p",{class:"text-lg font-medium"},"No subscription plans found",-1),t("p",{class:"text-sm mt-1"},"Subscription plans will appear here",-1)])])):l("",!0)]),t("div",Lt,[e[32]||(e[32]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"User Growth (Last 6 Months)",-1)),r.usersByMonth&&r.usersByMonth.length>0?(i(),n("div",Ft,[t("div",Gt,[(i(!0),n(u,null,m(r.usersByMonth,(s,a)=>(i(),n("div",{key:a,class:"flex-1 flex flex-col items-center justify-end h-full max-w-[80px]"},[t("div",{class:"w-full bg-gradient-to-t from-blue-500 to-blue-400 rounded-t-lg transition-all hover:from-blue-600 hover:to-blue-500 cursor-pointer group relative min-h-[4px]",style:_({height:h.value.value>0?`${Math.max(s.count/h.value.value*80,s.count>0?8:4)}%`:"4px"}),title:`${s.month}: ${s.count} users`},[t("div",Tt,o(s.count)+" user"+o(s.count!==1?"s":""),1)],12,Rt),t("p",qt,o(s.month||"N/A"),1),t("p",Et,o(s.count||0),1)]))),128))]),t("div",It,[t("div",Jt,[e[29]||(e[29]=t("span",{class:"font-semibold"},"Total:",-1)),t("span",Kt,o(r.usersByMonth.reduce((s,a)=>s+(a.count||0),0))+" users",1)]),t("div",Qt,[e[30]||(e[30]=t("span",{class:"font-semibold"},"Average:",-1)),t("span",Wt,o(Math.round(r.usersByMonth.reduce((s,a)=>s+(a.count||0),0)/r.usersByMonth.length))+" users/month",1)])])])):(i(),n("div",Xt,[...e[31]||(e[31]=[t("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),t("p",{class:"text-lg font-medium"},"No data available",-1),t("p",{class:"text-sm mt-1"},"User growth data will appear here",-1)])]))])])])]),_:1},8,["user"])],64))}};export{te as default};
